@using ASOFT.ERP.A00.Core;
@using ASOFT.ERP.A00.Entities.Common;
@using Kendo.Mvc.UI;
@using ASOFT.ERP.A00.Core.Control;

@model List<KeyValuePair<int, string>>
@{
    ViewBag.Title = "DashBoard";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int maxBlock = ViewBag.MaxBlock ?? 0;
    List<bool> ShowReport = ViewBag.ShowReport;
}

@(Html.Kendo().Window()
    .Name("ZoomConfig")
    .Content(Html.Partial("ZoomMenu").ToHtmlString())
    .HtmlAttributes(new { style = "width:auto;overflow: hidden;", @class = "asf-windown" })
    .Visible(false)
    .Title(false)
    .Animation(false)
)

<div id='contentMaster'>
    @Html.ASOFTHeader(new HeaderModel() { Title = "DashBoard", Breakcrumb = false })
    <div id="message"></div>
    <div class="drag-container">
        <div id="multi-draggable-block">
            @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='Block{1:00}' data-index='{1}' {2}>",
                                                    "s-block", 1, ShowReport[0] ? null : "style='display: none;'"))

            Html.RenderPartial(string.Format("Block{0:00}", 1), new ASOFTChartSetting());

                @MvcHtmlString.Create("</div>")

            @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='Block{1:00}' data-index='{1}' {2}>",
                                           "s-block", 3, ShowReport[1] ? null : "style='display: none;'"))

            Html.RenderPartial(string.Format("Block{0:00}", 3), new ASOFTChartSetting());

                @MvcHtmlString.Create("</div>")

            @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='Block{1:00}' data-index='{1}' {2}>",
                                           "s-block", 4, ShowReport[1] ? null : "style='display: none;'"))

            Html.RenderPartial(string.Format("Block{0:00}", 4), new ASOFTChartSetting());

                @MvcHtmlString.Create("</div>")

            @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='Block{1:00}' data-index='{1}' {2}>",
                                           "s-block", 5, ShowReport[2] ? null : "style='display: none;'"))

            Html.RenderPartial(string.Format("Block{0:00}", 5), new ASOFTChartSetting());

                @MvcHtmlString.Create("</div>")

            <!-- Chart ASM -->
            @if (ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_ANGEL)
            {
                for (int i = 0; i < 4; i++)
                {
                    @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='BlockASM{1:00}' data-index='{2}'>",
                                                    "s-block", i + 1, i + 5))

                    Html.RenderPartial(string.Format("BlockASM01"), new ASOFTChartSetting());

                    @MvcHtmlString.Create("</div>")
                }
            }

            <!-- End Chart ASM -->

            @* @MvcHtmlString.Create(string.Format(
                                           "<div class='asf-block-wrapper {0}' id='Block{1:00}' data-index='{1}' {2}>",
                                           "s-block", 8, "style='display: none;'"));

                Html.RenderPartial(string.Format("Block{0:00}", 8), new ASOFTChartSetting());

                @MvcHtmlString.Create("</div>")*@
        </div>
    </div>
    <div id="dashboard-toolbar">
        <!-- Dashboard toolbar -->
        <ul class="asf-toolbar">
            <li><a class="asfbtn-item-32  k-button k-button-icon" id="btnResetLayout" style="" title="Đặt lại mặc định" data-role="button" role="button" aria-disabled="false" tabindex="0"><span class="k-sprite asf-icon asf-icon-32 asf-i-reset"></span></a></li>
            <li><a class="asfbtn-item-32  k-button k-button-icon" id="btnSaveLayout" style="" title="Lưu thiết lập" data-role="button" role="button" aria-disabled="false" tabindex="0"><span class="k-sprite asf-icon asf-icon-32 asf-i-send-doc-32"></span></a></li>
        </ul>
    </div>
</div>


@section styleFeature{
    <link href="@Url.Content("~/Areas/BI/Content/BF0000.css")" rel="stylesheet" type="text/css" />
}
@section jsFeature {
    <script src="@Url.Content("~/Areas/BI/Scripts/BF0000/BF0000.js")"></script>
}

@Html.ASOFTHidden("UrlSaveData", Url.Action("SaveIndexer", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlReset", Url.Action("ResetLayout", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlock01", Url.Action("Block01", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlock03", Url.Action("Block03", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlock04", Url.Action("Block04", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlock05", Url.Action("Block05", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlock08", Url.Action("Block08", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBF0001", Url.Action("BF0001", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UrlBlockASM01", Url.Action("BlockASM01", "BF0000", new { area = "BI", id = "SP11" }))
@Html.ASOFTHidden("UrlBlockASM02", Url.Action("BlockASM01", "BF0000", new { area = "BI", id = "SP21" }))
@Html.ASOFTHidden("UrlBlockASM03", Url.Action("BlockASM01", "BF0000", new { area = "BI", id = "SP31" }))
@Html.ASOFTHidden("UrlBlockASM04", Url.Action("BlockASM01", "BF0000", new { area = "BI", id = "SP41" }))
@Html.ASOFTHidden("UrlViewASM", Url.Action("ChartASM", "BF0000", new { area = "BI" }))
@Html.ASOFTHidden("UserID", ASOFTEnvironment.UserID)