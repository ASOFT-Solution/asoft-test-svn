
@using ASOFT.ERP.A00.Core.Control
@using ASOFT.ERP.A00.Core
@using ASOFT.ERP.A00.Entities.Common
@model ASOFTSysGrid

@{
    List<ASOFTGridColumnSetting> list = new List<ASOFTGridColumnSetting>();
    string Table = ViewBag.Grid;
    int typescr = ViewBag.ScreenType;
    var count = Model.Bind.Count;
}

@Html.ASOFTHidden(Table + "type", typescr)
@Html.ASOFTHidden("tableName", Table)
@Html.ASOFTHidden("PK"+ Table, Model.PK)


@for (int i = 0; i < count; i++)
{
    ASOFTGridColumnSetting Grid;
    string template = "";
    bool enable = Model.visible.ElementAt(i) == 1 ? true : false;
    int tp = Model.Template.ElementAt(i);
   
    Grid = new ASOFTGridColumnSetting
    {
        IDColumn = Model.Bind.ElementAt(i).Key,
        TitleColumn = Model.Title.ElementAt(i),
        TypeColumn = Model.Bind.ElementAt(i).Value,
        
        //ClientTemplate = template,
        VisibleColumn = enable,
        Width = Model.GridWidth[i] == 0 ? 100 : Model.GridWidth[i]
    };
    list.Add(Grid);
 }
    
@{
    var gridsetting = new ASOFTGridSetting 
    {
        NameGrid = "Grid" + Table,
        Scrollable = true,
        ControllerName = "PopupSelectData",
        NameEventPost = "ReadTK",
        ActionName = "Read",
        IsAutoHeight = false,
        IsShowCheck = true,
        HtmlAttribute = new { style = "height:300px;", @class = "asf-grid", AddNewRowDisabled = "true" },          
        ListGridColumn = list,   
     };           
 }
@(Html.ASOFTCreateGrid<dynamic>(gridsetting, Model.PK))