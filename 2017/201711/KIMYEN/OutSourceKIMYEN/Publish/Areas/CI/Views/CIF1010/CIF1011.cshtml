@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Created         Comment
//#     09/10/2014      Hoàng Tú        Tạo mới
//####################################################################
*@
@using System.Web.UI.WebControls;
@using ASOFT.ERP.A00.Core;
@using ASOFT.ERP.A00.Entities.Database
@model ASOFT.ERP.ViewModel.CI.CIF1011ViewModel
@{ 
    Layout = "~/Views/Shared/_PopupLayout.cshtml";
    ViewBag.Title = @Html.ASOFTPageTitle(@Html.PopupEditTitle(m => m.Title), "CIF1011").ToHtmlString();
    ViewBag.Width = 500;
}
<div class="asf-form-container">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "CIF1011" }))
    {                 
        <span class="asf-disabled-visibility">
            @Html.ASOFTTextBox(model => model.LastModifyDateValue)
        </span> 
       <div class="asf-form-container">
       <div class="form-content">              
           <table class="asf-table-view">
                    <tr>
                        <td class="asf-td-caption">@Html.ASOFTLabel(model => model.TeamID)</td>
                        <td class="asf-td-field" colspan="2" >
                              @(Html.ASOFTTextBox(model => model.TeamID, htmlAttribute: new { initValue = Model.TeamID }, checkRegularExp: true)
                                    .ReadOnlyIf(Model.FormStatus != ASOFTFormActionType.AddNew))
                        </td>
                    </tr>
               <tr>                         
                   <td class="asf-td-caption">@Html.ASOFTLabel(model => model.TeamName)</td>
                   <td class="asf-td-field" colspan="2" >
                       @Html.ASOFTTextBox(model => model.TeamName,
                                          htmlStyle: new { width = Unit.Percentage(100) })
                   </td>                       
               </tr>
               <tr>
                   <td class="asf-td-caption">@Html.ASOFTLabel(model => model.DepartmentID)</td>
                   <td class="asf-td-field" colspan="2" >
                       @if (Model.FormStatus == ASOFTFormActionType.AddNew)
                       { 
                           @(Html.ASOFTBussinessComboBox().ASOFTDepartmentID(model => model.DepartmentID,                                            
                                                                             htmlStyle: new
                                                                                 {
                                                                                     width = Unit.Percentage(100)
                                                                                 })
                                 .SelectedIndex(0)
                                .Events(e=>e.Change("combo_Changed")) 
                                 )                                           
                       
                       }else{                            
                             
                           @(Html.ASOFTBussinessComboBox().ASOFTDepartmentID(model => model.DepartmentID,                                            
                                                                                  htmlStyle: new
                                                                                 {
                                                                                     width = Unit.Percentage(100)
                                                                                 })
                                 .SelectedIndex(0).Enable(false))                                                                             
                       }
                   </td>                             
               </tr> 
               
               
               @if (ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_XUONGRONG)
               {
                <tr>
                        <td class="asf-td-caption">@Html.ASOFTLabel(model => model.BranchID)</td>
                        <td class="asf-td-field" colspan="2">
                            @(Html.ASOFTBussinessComboBox()
                                                    .ASOFTDRMBranchID(model => model.BranchID)
                                                    .Events(e=>e.Change("combo_Changed")))
                        </td>
                    </tr>                    
               }
                                                                      
               <tr>
                   <td class="asf-td-caption">@Html.ASOFTLabel(model => model.Notes)</td>
                   <td class="asf-td-field" colspan="2" >
                       @Html.ASOFTTextBox(model => model.Notes,
                                          htmlStyle: new { width = Unit.Percentage(100) })
                   </td>
               </tr>
               <tr>
                   <td class="asf-td-caption">@Html.ASOFTLabel(model => model.Notes01)</td>
                   <td class="asf-td-field" colspan="2" >
                       @Html.ASOFTTextBox(model => model.Notes01,
                                          htmlStyle: new { width = Unit.Percentage(100) })
                   </td>
               </tr>

               @{
                    if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_XUONGRONG)
                    {
                        <tr>
                           <td class="asf-td-caption">@Html.ASOFTLabel(model => model.AccountID).HideIf(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_XUONGRONG)</td>
                           <td class="asf-td-field" colspan="2" >
                               @(Html.ASOFTBussinessComboBox().ASOFTAccountIDCombo(model => model.AccountID,
                                                                                   htmlStyle: new
                                                                                       {
                                                                                           width = Unit.Percentage(100)
                                                                                       })
                                     .SelectedIndex(0)
                                     .Events(e=>e.Change("combo_Changed")).HideIf(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_XUONGRONG))                                                   
                           </td>
                       </tr>         
                       <tr>
                            <td class="asf-td-caption">@Html.ASOFTLabel(model => model.ContactPerson)</td>
                            <td class="asf-td-field" colspan="2">
                                @(Html.ASOFTBussinessComboBox().ASOFTContactPerson(model => model.ContactPerson,
                                                            htmlStyle: new
                                                          {
                                                              width = Unit.Percentage(100)
                                                          })
                                                          .SelectedIndex(0)
                                                           .Events(e => e.Change("combo_Changed"))
                                                           )
                            </td>
                        </tr> 
                    }
                }

                @if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_XUONGRONG)
                {
                    <tr>
                        <td class="asf-td-caption"></td>
                        <td class="asf-td-field" colspan="2">
                            @Html.ASOFTCheckbox(model => model.IsOrganizationDiagram)
                        </td>
                    </tr> 
                }
                                                      
               <tr>
                   <td class="asf-td-caption"></td>
                   <td class="asf-td-field" colspan="2" >
                       @if (Model.FormStatus == ASOFTFormActionType.AddNew)
                       {                               
                       }
                       else
                       {
                           @Html.ASOFTCheckbox(model => model.Disabled)                      
                       }
                   </td>
               </tr>
           </table>
       </div>
               
     </div> 
           <div class="asf-form-button">
                <table class="asf-table-view">
                        <tr>
                         <td align="right">
                         <div class="asf-popup-button-container">
                            @if (Model.FormStatus == ASOFTFormActionType.AddNew)
                            {
                                bool hasPermission = false;
                                if (Model.AllowAdd())
                                {
                                    hasPermission = true;
                                }         
                              
                                                                                               
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                                      .Name("BtnClose")

                                     .Events(e => e.Click(hasPermission ? "popupClose_Click" : "ASOFT.asoftPopup.closeOnly"))
                                    )</div>
                                <div>@(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveCopy"))
                                        .Name("CIF1011SaveCopy")
                                        .Events(m => m.Click("CIF1011SaveCopy_Click")))
                                </div>
                                  <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveNew"))
                                        .Name("CIF1011SaveNew")
                                       .Events(m => m.Click("CIF1011btnSaveNew_Click"))
                                     )
                                </div>               
                                        
                            }
                            else
                                if (Model.FormStatus != ASOFTFormActionType.AddNew)
                                {
                                    bool hasPermission = false;
                                    if (Model.CheckPermission("CIF1011", ASOFTPermission.Update))
                                    {
                                        hasPermission = true;
                                    }      
                               
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                                          .Name("BtnClose")
                                        .Events(e => e.Click(hasPermission ? "popupClose_ClickA" : "ASOFT.asoftPopup.closeOnly")))
                                </div>
                                 <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSave"))
                                          .Name("CIF1011btnSaveNew")
                                          .Events(e => e.Click("CIF1011btnUpdate_Click"))
                                          .Enable(hasPermission))
                                </div>                                                                                       
                                          
                                }
                                </div>
                                </td>
                        </tr>
                    </table>
                    </div>                       
    }
</div>
@section jsFeature 
    {
    <script src="@Url.Content("~/Areas/CI/Scripts/CIF1011.js?v=" + ASOFTEnvironment.Version)" type="text/javascript"></script>
}
