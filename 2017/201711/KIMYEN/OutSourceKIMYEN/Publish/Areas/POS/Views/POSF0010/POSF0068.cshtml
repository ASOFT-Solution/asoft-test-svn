@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Updater         Comment
//#     07/04/2014      Chánh Thi    Tạo mới
//####################################################################
*@

@Html.ASOFTHidden("UrlInsert", Url.Action("Insert"))
@Html.ASOFTHidden("UrlUpdate", Url.Action("Update"))
@model ASOFT.ERP.ViewModel.POS.POSF00101ViewModel

@{
    Layout = "~/Views/Shared/_PopupLayout.cshtml";
    ViewBag.Title = @Html.ASOFTPageTitle(@Html.PopupEditTitle(m => m.Title), "POSF0068").ToHtmlString();
    ViewBag.Width = 900;
}

@helper CommonPanel()
{
    @Html.Partial("Common")  
}

@helper ProductPanel()
{
    @Html.Partial("ProductPriceTable")
}

@helper UserPanel()
{
    @Html.Partial("UserInfo")
}

@helper BillPanel()
{
    @Html.Partial("BillInfo")
}

@helper VoucherPanel()
{
    @Html.Partial("VoucherInfo")
}

@helper Manager()
{
    @Html.Partial("Manager")
}


 @Html.ASOFTHidden("EnvironmentDivisionID", ASOFTEnvironment.DivisionID)

@*@helper VoucherNoPanel()
{
    @Html.Partial("Voucher")
}*@

<div class="asf-form-container">
    @using (Html.BeginForm(null, null, FormMethod.Post, new
    {
        id = "POSF00101" 
    }))
    {
        <span class="hide">
            @Html.ASOFTLabel(model => model.InventoryTypeID)
            @Html.ASOFTLabel(model => model.PriceValue)
            @Html.ASOFTLabel(model => model.PriceColumn)
            @Html.ASOFTLabel(model => model.PromoteID)
            @Html.ASOFTLabel(model => model.S2)
            @Html.ASOFTLabel(model => model.S3)
            @Html.ASOFTLabel(model => model.ImageLogo)
        </span>
        <div class="form-content">
            @(Html.ASOFTTab()
              .Name("POSF00101Tab")             
              .Events(e => e.Activate("POSF00101TabActivate"))
              .Items(tabstrip =>
              {

                  tabstrip.Add().Text(Html.ASOFTRaw(m => m.CommonInfo).ToString().ToUpper())
                      .Selected(true)
                      .HtmlAttributes(new
                      {
                          @id = "TabstripMaster-1"
                      })
                      .ContentHtmlAttributes(new
                      {
                          @class = "asf-tab-content"
                      })
                      .Content(this.CommonPanel().ToHtmlString());

                  tabstrip.Add().Text(Html.ASOFTRaw(m => m.ProductInfo).ToString().ToUpper())
                      .HtmlAttributes(new
                      {
                          @id = "TabstripMaster-2"
                      })
                      //.ContentHtmlAttributes(new { style = "height:792px;" })
                      .ContentHtmlAttributes(new
                      {
                          @class = "asf-tab-content"
                      })
                      .Content(this.ProductPanel().ToHtmlString());

                  tabstrip.Add().Text(Html.ASOFTRaw(m => m.UserInfo).ToString().ToUpper())
                    .HtmlAttributes(new
                    {
                        @id = "TabstripMaster-3"
                    })
                      //.ContentHtmlAttributes(new { style = "height:792px;" })
                    .ContentHtmlAttributes(new
                    {
                        @class = "asf-tab-content"
                    })
                    .Content(this.UserPanel().ToHtmlString());

                  tabstrip.Add().Text(Html.ASOFTRaw(m => m.BillInfo).ToString().ToUpper())
                   .HtmlAttributes(new
                   {
                       @id = "TabstripMaster-4"
                   })
                      //.ContentHtmlAttributes(new { style = "height:792px;" })
                   .ContentHtmlAttributes(new
                   {
                       @class = "asf-tab-content"
                   })
                   .Content(this.BillPanel().ToHtmlString());

                  tabstrip.Add().Text(Html.ASOFTRaw(m => m.TitleVoucher).ToString().ToUpper())
                 .HtmlAttributes(new
                 {
                     @id = "TabstripMaster-5"
                 })
                      //.ContentHtmlAttributes(new { style = "height:792px;" })
                 .ContentHtmlAttributes(new
                 {
                     @class = "asf-tab-content"
                 })
                 .Content(this.VoucherPanel().ToHtmlString());

                  if (ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_KIMYEN)
                  {
                      tabstrip.Add().Text(Html.ASOFTRaw(m => m.Manager).ToString().ToUpper())
                    .HtmlAttributes(new
                    {
                        @id = "TabstripMaster-6"
                    })
                          //.ContentHtmlAttributes(new { style = "height:792px;" })
                    .ContentHtmlAttributes(new
                    {
                        @class = "asf-tab-content"
                    })
                    .Content(this.Manager().ToHtmlString());
                  }

                  //tabstrip.Add().Text(Html.ASOFTRaw(m => m.VoucherNoInfo).ToString().ToUpper())
                  //    .HtmlAttributes(new { @id = "TabstripMaster-3" })
                  //    //.ContentHtmlAttributes(new { style = "height:792px;" })
                  //    .ContentHtmlAttributes(new { @class = "asf-tab-content" })
                  //    .Content(this.VoucherNoPanel().ToHtmlString());

              })
              )
        </div>
        <div class="asf-form-button">
            <table class="asf-table-view">
                <tr>
                    <td align="right">
                        <div class="asf-popup-button-container">
                            @if (Model.FormStatus == ASOFTFormActionType.AddNew)
                            {
                                bool hasPermission = false;
                                if (Model.AllowAdd())
                                {
                                    hasPermission = true;
                                }    
                             
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                                      .Name("BtnCloseNew")
                                      .Events(e => e.Click(hasPermission ? "popupClose1" : "ASOFT.asoftPopup.closeOnly")))
                                </div>
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveCopy"))
                                      .Name("BtnSaveDetail")
                                      .Events(e => e.Click("popupSaveCopy"))
                                      .HideIf(Model.FormStatus != ASOFTFormActionType.AddNew)
                                      .Enable(hasPermission))
                                </div>
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveNew"))
                                      .Name("BtnSaveClose")
                                      .Events(e => e.Click("popupSaveNew"))
                                      .HideIf(Model.FormStatus != ASOFTFormActionType.AddNew)
                                      .Enable(hasPermission))
                                </div>
                            }
                            else
                            {
                                bool hasPermission = false;
                                if (Model.CheckPermission("POSF00101", ASOFTPermission.Update))
                                {
                                    hasPermission = true;
                                }
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                                      .Name("BtnCloseUpdate")
                                      .Events(e => e.Click(hasPermission ? "popupClose1" : "ASOFT.asoftPopup.closeOnly")))
                                </div>    
                                <div>
                                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSave"))
                                      .Name("BtnSave")
                                      .Events(e => e.Click("popupSaveUpdate"))
                                      .HideIf(Model.FormStatus == ASOFTFormActionType.AddNew)
                                      .Enable(hasPermission))
                                </div>
                            }
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    }
</div>

@section jsFeature {
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF00101.js")" type="text/javascript"></script>
     <script 
        src="@Url.Content("~/Areas/POS/Scripts/ASOFTVIEW.js")" 
        type="text/javascript"></script>

    <script src="@Url.Content("~/Areas/POS/Scripts/POSF0002.js")" type="text/javascript"></script>
}

@section styleFeature{
    <link href="@Url.Content("~/Areas/POS/Content/POSF00101.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Areas/POS/Content/POSF00102.css")" rel="stylesheet" type="text/css" />
}
