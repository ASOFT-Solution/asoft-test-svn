@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Updater         Comment
//#     27/03/2013      Thai Son        Add heading
//####################################################################
*@
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_PosLayout.cshtml";
}
@using ASOFT.ERP.A00.Entities.Database
@using ASOFT.ERP.POS.Entities
@model ASOFT.ERP.ViewModel.POS.POSF0066ViewModel

@{
    ViewBag.Title = @Html.ASOFTPageTitle(m => m.Title, "POSF0066");
    string headerTemplate = ASOFTBussinessControl.CreateHeaderTemplate(Model.InventoryColumn);
    string itemTemplate = ASOFTBussinessControl.CreateItemTemplate(Model.InventoryColumn);
    string searchAction = "GetInventories";
}

@(Html.Kendo().Window()
    .Name("TaskButtonsMB")
    .Content(Html.Partial("Partials/TaskButtonsMB1").ToHtmlString())
    .HtmlAttributes(new { style = "width:auto; overflow: hidden;", @class = "asf-windown" })
    .Visible(false)
    .Title(false)
    .Animation(true)
)


<div id="contentMaster">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "POSF00161" }))
    {
        <div id="posFilter" class="container_12">
            <div class="grid_8 alpha float_left">

                @(Html.Kendo().AutoCompleteFor(model => model.InventoryID)
                      .Animation(animation => animation.Enable(false))
                      .HtmlAttributes(new Dictionary<string, Object> {
                          {"class","post-autocomplete"}, 
                          {"height","32px"},
                          {"data-bind", "value: InventoryID"}
                      })
                      .MinLength(1)
                      .DataTextField(POSF001611.COL_INVENTORYNAME)
                      .Placeholder(Html.ASOFTRaw(model => model.SearchInventoryID))
                      .Filter("startswith")
                      .HeaderTemplate(headerTemplate)
                      .Template(itemTemplate)
                      .Name("InventoryID")
                      .Events(e => e.Select("InventoryID_Change")
                      .Close("InventoryID_Close").DataBound("InventoryID_DataBound"))
                      .DataSource(source => source.Read(read => read.Action(searchAction, "POSF0016",
                          new { area = "POS" })).ServerFiltering(true))
                      )

            </div>
            <div class="grid_4_1 omega float_right addObject">
                @(Html.Kendo().AutoCompleteFor(model => model.MemberID)
                      .Animation(animation => animation.Enable(false))
                      .HtmlAttributes(new Dictionary<string, Object> {
                          {"class","post-add-autocomplete"}, 
                          {"height","32px"},
                          {"data-bind", "value: MemberID"}
                      })
                      .DataTextField(POST0011.COL_MEMBERNAME)
                      .Placeholder(Html.ASOFTRaw(model => model.SearchMemberID))
                      .Filter("contains")
                      .Name("MemberID")
                      .Events(e => e.Select("MemberID_Change").DataBound("MemberID_DataBound"))
                      .DataSource(source => source.Read(read => read.Action("GetMembers", "POSF0016",
                          new { area = "POS" })).ServerFiltering(true))
                      )
                @(Html.ASOFTAddBlueButton(Model.AddObject)
                      .Name(Model.AddObject ?? "btnAddObject")
                      .Events(e => e.Click("MemberID_Click"))
                      )

            </div>

        </div>
        
        <!--Grid -->
        <div id="pos_grid" class="container_12">
            @Html.Partial("../POSF0066/GridInventory")
        </div>
        <div class="clear"></div>
        <div>
                @(Html.ASOFTButton()
                .Name("btnChooseMobile")
                //.Icon("asf-i-return")
                .ImageUrl("/Content/Images/navigate.next.png")
                .HtmlAttributes(new Dictionary<string, Object> {
                    {"class", "asf-button-1"}
                }))
            </div>
        <div id="pos_controls" class="container_12">
            <div class="container_12 gift_container">
                <div class="grid_3">
                    @Html.LabelFor(model => model.Gifts, htmlAttributes: new { @class = "bold" }):
                </div>
                <div class="grid_9">
                    <marquee> 
                        @Html.ASOFTWrapperTagFor(model => model.Gifts)
                    </marquee>
                </div>
            </div>
            <!--End Grid -->
            <div class="container_12 full_height">
                <div class="grid_8 alpha asf-disabled-visibility">
                    <div id="pos_info">
                         @Html.Partial("../POSF0066/VoucherInfo")
                    </div>
                </div>
                <div class="grid_10 omega">
                    <div class="container_12" id="controls">
                        <ul>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.ChooseDish))
                                                    .Name("btnChooseDish")
                                                    .Icon("asf-i-return")
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button asf-btn-disabled"},
                                                        {"data-asf-enable-bubbling", true}
                                                    }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.MergeSplitTable))
                                                    .Name("btnMergeSplitTable")
                                                    .Icon("asf-i-return")
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button asf-btn-disabled"}
                                                    }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.MergeSplitBill))
                                                    .Name("btnMergeSplitBill")
                                                    .Icon("asf-i-return")
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button asf-btn-disabled"}
                                                    }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.CancelledDish))
                                                    .Name("btnReturnedInventory")
                                                    .Icon("asf-i-return")
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button asf-btn-disabled"}
                                                    }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.Promotion))
                                                    .Name("btnPromotion")
                                                    .Icon("asf-i-return ")
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button asf-btn-disabled"}
                                                    }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.PrintProcessDish))
                                                .Name("btnPrintProcessDish")
                                                .Icon("asf-i-return")
                                                .HtmlAttributes(new Dictionary<string, Object> {
                                                    {"class", "asf-button asf-btn-disabled"}
                                                        
                                                }))
                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.PrintBill))
                                                        .Name("btnPrintBill")
                                                        .Icon("asf-i-return")
                                                        .HtmlAttributes(new Dictionary<string, Object> {
                                                            {"class", "asf-button asf-btn-disabled"}
                                                        }))

                                </div>
                            </li>
                            <li>
                                <div class="control-middle">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.FinishShift))
                                                    .Name("btnFinishShift")
                                                    .Icon("asf-i-return")
                                                    .Events(e=>e.Click("btnFinishShift_Click"))
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button"}
                                                    }))
                                </div>
                            </li>
                        </ul>

                    </div>
                    <div id="payment_container">
                        <div class="clearfix"></div>
                        <div class="pos_header">
                             <img id="arrow-1" src="~/Content/images/arrowdown.png"/>
                            <img id="arrow-3" src="~/Content/images/arrowup.png"/>
                            <h3>@Html.ASOFTRaw(model => model.PaymentTitle)</h3>
                        </div>
                        <div class="pos_inner other-height">
                            <div class="grid_6 line_right">

                                <div class="grid_12">
                                    <div class="grid_6">
                                        @Html.ASOFTLabel(model => model.TotalAmount)
                                    </div>
                                    <div class="grid_6 asf-cols-align-right">
                                        @Html.ASOFTWrapperTagFor(model => model.TotalAmount,
                                            htmlAttributes: new RouteValueDictionary {
                                                {"data-bind","text: TotalAmount"}
                                            })
                                    </div>
                                </div>

                                <div class="grid_12">
                                    <div class="grid_4">
                                        @Html.ASOFTLabel(model => model.TotalDiscountAmount)
                                    </div>
                                    <div class="grid_4 asf-cols-align-right">
                                        @(Html.ASOFTPercentDecimal(model => model.TotalDiscountRate,
                                            htmlStyle: new
                                            {
                                                width = "60%"
                                            },
                                            htmlAttribute: new Dictionary<string, object> {
                                                {"class" , "special numberic"},
                                                {"data-bind","value: TotalDiscountRate"}})
                                            )&nbsp;%
                                    </div>
                                    <div class="grid_4 asf-cols-align-right">
                                        @(Html.ASOFTConvertedDecimal(model => model.TotalDiscountAmount,
                                        htmlStyle: new
                                        {
                                            width = "calc(100% - 3px)",
                                            padding_right = "3px"
                                        },
                                        htmlAttribute: new Dictionary<string, object> {
                                            {"class" , "special numberic"},
                                            {"data-bind","value: TotalDiscountAmount"}})
                                        )
                                    </div>
                                </div>

                                <div class="grid_12">
                                    <div class="grid_4">
                                        @Html.ASOFTLabel(model => model.TotalRedureRate)
                                    </div>
                                    <div class="grid_4 asf-cols-align-right">
                                        @(Html.ASOFTPercentDecimal(model => model.TotalRedureRate,
                                        htmlStyle: new
                                        {
                                            width = "60%"
                                        },
                                        htmlAttribute: new Dictionary<string, object> {
                                            {"class" , "special numberic"},
                                            {"data-bind","value: TotalRedureRate"}})
                                        )&nbsp;%
                                    </div>
                                    <div class="grid_4 asf-cols-align-right">
                                        @(Html.ASOFTConvertedDecimal(model => model.TotalRedureAmount,
                                            htmlStyle: new
                                            {
                                                width = "calc(100% - 3px)",
                                                padding_right = "3px"
                                            },
                                            htmlAttribute: new Dictionary<string, object> {
                                                {"class" , "special numberic"},
                                                {"data-bind","value: TotalRedureAmount"}})
                                            )

                                    </div>
                                </div>


                                <div class="grid_12">
                                    <div class="grid_6">
                                        @Html.ASOFTLabel(model => model.TotalTaxAmount)
                                    </div>
                                    <div class="grid_6 asf-cols-align-right">
                                        @Html.ASOFTWrapperTagFor(model => model.TotalTaxAmount,
                                        htmlAttributes: new RouteValueDictionary {
                                            {"data-bind","text: TotalTaxAmount"}
                                        })
                                    </div>
                                </div>

                                <div class="grid_12 line">&nbsp;</div>
                                <div class="grid_12">
                                    <div class="grid_6">
                                        @Html.LabelFor(model => model.TotalInventoryAmount, htmlAttributes: new
                                        {
                                            @class = "bold special"
                                        })
                                    </div>
                                    <div class="grid_6 asf-cols-align-right">
                                        @Html.ASOFTWrapperTagFor(model => model.TotalInventoryAmount,
                                        htmlAttributes: new RouteValueDictionary {
                                            {"data-bind","text: TotalInventoryAmount"},
                                            {"class","amount special"}
                                        })
                                    </div>
                                </div>


                            </div>

                            <div class="grid_6">
                                 @if (Model.Status == 2)
                                {
                                    <div class="grid_12">
                                        <div class="grid_6">
                                            @Html.LabelFor(model => model.ChangeAmount, htmlAttributes: new {@class = ""})
                                        </div>
                                        <div class="grid_6 asf-cols-align-right">
                                            @(Html.ASOFTConvertedDecimal(model => model.ChangeAmount,
                                                  htmlStyle: new {width = "100%"},
                                                  htmlAttribute: new Dictionary<string, object>
                                                  {
                                                      {"class", "numberic"},
                                                      {"data-bind", "value: ChangeAmount"}
                                                  }).ReadOnlyIf(true)
                                                  )
                                        </div>
                                    </div>
                                }
                                <div id="divPaymentID1" class="grid_12 hidden">
                                    <div class="grid_6">
                                        @Html.LabelFor(model => model.PaymentObjectAmount01, htmlAttributes: new
                                        {
                                            @class = "special"
                                        })
                                    </div>
                                    <div class="grid_6">
                                        @(Html.ASOFTConvertedDecimal(model => model.PaymentObjectAmount01,
                                              htmlStyle: new
                                              {
                                                  width = "calc(100% - 3px)",
                                                  padding_right = "3px"
                                              },
                                              htmlAttribute: new Dictionary<string, object> {
                                                  {"class" , "special numberic"},
                                                  {"data-bind","value: PaymentObjectAmount01"}})
                                              )
                                    </div>

                                </div>
                                <div id="divPaymentID2" class="grid_12 hidden">
                                    <div class="grid_6">
                                        @Html.LabelFor(model => model.PaymentObjectAmount02, htmlAttributes: new
                                        {
                                            @class = "special"
                                        })
                                    </div>
                                    <div class="grid_6">
                                        @(Html.ASOFTConvertedDecimal(model => model.PaymentObjectAmount02,
                                              htmlStyle: new
                                              {
                                                  width = "calc(100% - 3px)",
                                                  padding_right = "3px"
                                              },
                                              htmlAttribute: new Dictionary<string, object> {
                                                  {"class" , "special numberic"},
                                                  {"data-bind","value: PaymentObjectAmount02"}})
                                              )
                                    </div>

                                </div>

                                <div class="grid_12">
                                    <div class="grid_6">
                                        @Html.LabelFor(model => model.Change, htmlAttributes: new
                                        {
                                            @class = "special"
                                        })
                                    </div>
                                    <div class="grid_6 asf-cols-align-right">
                                        @Html.ASOFTWrapperTagFor(model => model.Change,
                                            htmlAttributes: new RouteValueDictionary {
                                                {"data-bind","text: Change"},
                                                {"class","amount special return-amount"}
                                            })
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="grid_2 omega float_right">
                    <div class="grid_12 pos_button">
                        <div class="control1">@(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.Extension))
                                                    .Name("btnExtension")
                                                    //.Icon("asf-i-return")
                                                    .ImageUrl("/Content/Images/morong.png")
                                                    .Events(e=>e.Click("btnExtension_Click"))
                                                    .HtmlAttributes(new Dictionary<string, Object> {
                                                        {"class", "asf-button"}
                                                    }))
                        </div>
                    </div>
                    <div class="grid_12 pos_button">
                        <div class="control1">
                            @(Html.ASOFTButton(caption: Html.ASOFTRaw(model => model.ChooseTable))
                                  .Name("btnChooseTable")
                                  //.Icon("asf-i-return")
                                  .ImageUrl("/Content/Images/gopban1.png")
                                  .HtmlAttributes(new Dictionary<string, Object> {
                                      {"class", "asf-button asf-btn-disabled"}
                                  }))
                        </div>
                    </div>
                    <div class="grid_12 pos_button">
                        <div class="control2 pay">
                            @(Html.ASOFTButton()
                                  .Name("btnSave")
                                  .Enable(Model.AllowAdd() || Model.AllowUpdate())
                                  .Content(Html.ASOFTRaw(model => model.Accept))
                                  //.Icon("asf-i-pay")
                                  .ImageUrl("/Content/Images/pay.png")
                                  .Events(e => e.Click("btnSave_Click"))
                                  .HtmlAttributes(new Dictionary<string, Object> {
                                      {"class", "asf-button"}
                                  })
                                  )
                        </div>
                    </div>
                </div>
            </div>

        </div>
        @Html.ASOFTHidden(m => m.APK)
        @Html.ASOFTHidden(m => m.Status)
        @Html.ASOFTHidden(m => m.APKMInherited)
        @Html.ASOFTHidden(m => m.IsBuy)
        @Html.ASOFTHidden(m => m.LastModifyDateValue)
        @Html.ASOFTHidden("MemberValue", Model.MemberID);
        @Html.ASOFTHidden("PrintMessage", ASOFTLanguage.FindWordA00("A00.PrintMessage"))
        <a id="btnPrint" class="hidden">Print!</a>
    }
</div>


@section jsFeature {
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF0040/asoft-core-jquery.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Areas/POS/Scripts/jquery.scannerdetection.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF00161.part3.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF0066.part2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF0066.js")" type="text/javascript"></script>
}
@section styleFeature{
    <link href="@Url.Content("~/Areas/POS/Content/POSF0040.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Areas/POS/Content/POSF0066.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Areas/POS/Content/POSF0040RWD/POSF0040RWD.css")" rel="stylesheet" type="text/css" />
}


