@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Updater         Comment
//#     28/04/2014      Đam Mơ          Tạo mới
//####################################################################
*@

@using ASOFT.ERP.A00.Core;
@using ASOFT.ERP.A00.Entities.Database
@using ASOFT.ERP.ViewModel.Helper;

@model ASOFT.ERP.ViewModel.POS.POSF00201ViewModel

@{
    Layout = "~/Views/Shared/_PopupLayout.cshtml";
    ViewBag.Title = @Html.ASOFTPageTitle(ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_OKIA ? @Html.PopupEditTitle(m => m.Title) : LocalizedHelper.GetLocalizedResourceString("POSF00201.TitleOKIA", "POSF00201"), "POSF00201").ToHtmlString();
    ViewBag.Width = 900;
}

<div class="asf-form-container">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "POSF00201" }))
    {
            <span class="asf-disabled-visibility"> 
           @* @Html.ASOFTTextBox(model => model.MemberCardID) *@ 
            @Html.ASOFTTextBox(model => model.LastModifyDateValue) 
             @Html.ASOFTTextBox(model => model.LastModifyDate) 
                @Html.ASOFTTextBox(model => model.FormStatus) 
            </span>
        <div class="container_12">
            <div class="grid_6">
                <table class="asf-table-view">
                    <tr>
                          @if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_OKIA)
                        {
                            <td >@Html.ASOFTLabel(model => model.MemberCardID)</td>
                        }
                        else
                        {
                            <td >@LocalizedHelper.GetLocalizedResourceString("POSF00201.MemberCardIDOKIA", "POSF00201")</td>
                        }
                        <td>
                            @if(Model.FormStatus == ASOFTFormActionType.AddNew)
                            {
                            @Html.ASOFTTextBox(model => model.MemberCardID, 
                            htmlStyle: new { width = Unit.Percentage(100)}) 
                            }
                            else if (Model.FormStatus != ASOFTFormActionType.AddNew)
                            {
                            @Html.ASOFTTextBox(model => model.MemberCardID, 
                            htmlStyle: new { width = Unit.Percentage(100)}).ReadOnlyIf(true) 
                            } 
                        </td>
                    </tr>
                      <tr>
                        @if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_OKIA)
                        {
                            <td >@Html.ASOFTLabel(model => model.MemberCardName)</td>
                        }
                        else
                        {
                            <td >@LocalizedHelper.GetLocalizedResourceString("POSF00201.MemberCardNameOKIA", "POSF00201")</td>
                        }
                        <td>
                            @Html.ASOFTTextBox(model => model.MemberCardName, htmlStyle: new { width = Unit.Percentage(100) })
                        </td>
                    </tr>                    
                    <tr>
                         @if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_OKIA)
                        {
                            <td >@Html.ASOFTLabel(model => model.MemberID)</td>
                        }
                        else
                        {
                            <td >@LocalizedHelper.GetLocalizedResourceString("POSF00201.MemberIDOKIA", "POSF00201")</td>
                        }
                        <td>
                            @Html.ASOFTTextBox(model => model.MemberID)
                        </td>
                    </tr>
                    <tr>
                        @if (ASOFTEnvironment.CustomerIndex != ASOFTConstants.CUSTOMERINDEX_OKIA)
                        {
                            <td >@Html.ASOFTLabel(model => model.MemberName)</td>
                        }
                        else
                        {
                            <td >@LocalizedHelper.GetLocalizedResourceString("POSF00201.MemberNameOKIA", "POSF00201")</td>
                        }
                        <td>
                            @Html.ASOFTTextBox(model => model.MemberName).ReadOnlyIf(true)
                        </td>
                    </tr>
                    <tr>
                        <td>@Html.ASOFTLabel(model => model.TypeNo)</td>
                        <td>
                            @Html.ASOFTBussinessComboBox().ASOFTTypeNo(model => model.TypeNo, htmlStyle: new { width = Unit.Percentage(100) })
                        </td>
                    </tr>
                </table>
            </div>
            <div class="grid_6 line_left">
                <table class="asf-table-view">
                    <tr>
                        <td>@Html.ASOFTLabel(model => model.ReleaseDate)</td>
                        <td>
                            @Html.ASOFTDateEdit(model => model.ReleaseDate, htmlStyle: new { width = Unit.Percentage(100) })
                        </td>
                    </tr>
                    <tr>
                        <td>@Html.ASOFTLabel(model => model.ExpireDate)</td>
                        <td>
                            @Html.ASOFTDateEdit(model => model.ExpireDate, htmlStyle: new { width = Unit.Percentage(100) })
                        </td>
                    </tr>
                    <tr>
                        <td>@Html.ASOFTLabel(model => model.LockedReason)</td>
                        <td>
                            @Html.ASOFTTextBox(model => model.LockedReason, htmlStyle: new { width = Unit.Percentage(100) })
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            @Html.ASOFTCheckbox(model => model.Locked)
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            @Html.ASOFTCheckbox(model => model.Disabled)
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            @Html.ASOFTCheckbox(model => model.IsCommon)
                        </td>
                    </tr>
                </table>
            </div>
        </div>
      
        <div class="container_12 asf-form-button">
            <ul>
                @if (Model.FormStatus == ASOFTFormActionType.AddNew)
                {
                    bool hasPermission = false;
                    if (Model.AllowAdd())
                    {
                        hasPermission = true;
                    }    
                             
                    
                <li>@(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveNew"))
                      .Name("posf00201SaveNew")
                      .Events(m => m.Click("posf00201SaveNew_Click" ))
                      .Enable(hasPermission))

                </li>

                <li>@(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSaveCopy"))
                      .Name("posf00201SaveCopy")
                      .Events(m => m.Click("posf00201SaveCopy_Click"))
                      .Enable(hasPermission))

                </li>
                <li>
                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                      .Name("BtnClose")
                      .Events(e => e.Click(hasPermission? "popupClose_Click" : "ASOFT.asoftPopup.closeOnly")))

                </li>
                }
                else 
                if (Model.FormStatus != ASOFTFormActionType.AddNew)
                {
                    bool hasPermission = false;
                    if (Model.CheckPermission("POSF00201", ASOFTPermission.Update))
                    {
                        hasPermission = true;
                    }
                    <li>
                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnSave"))
                      .Name("btnSaveNew")
                      .Events(e => e.Click("btnUpdate_Click"))
                      .Enable(hasPermission))
                    </li>
                    <li>
                    @(Html.ASOFTButton(ASOFTLanguage.FindWordA00("A00.btnClose"))
                      .Name("BtnClose")
                      .Events(e => e.Click(hasPermission? "popupClose_Click" : "ASOFT.asoftPopup.closeOnly")))

                 </li>
                }
                
            </ul>
        </div>  
    }
</div>

@section styleFeature{
    <link href="@Url.Content("~/Areas/POS/Content/POSF0020.css")" rel="stylesheet" type="text/css" />
}

@section jsFeature {
    <script src="@Url.Content("~/Areas/POS/Scripts/POSF00201.js")" type="text/javascript"></script>
}
