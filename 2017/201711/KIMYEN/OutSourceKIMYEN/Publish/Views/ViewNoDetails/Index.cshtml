@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Updater         Comment
//#     18/11/2015      Toàn Thiện      Tạo mới
//####################################################################
*@
@using ASOFT.ERP.ViewModel;
@using ASOFT.ERP.A00.Core.Control;
@using ASOFT.ERP.A00.Core;
@using ASOFT.ERP.A00.Entities.Infrastructure;
@using ASOFT.ERP.A00.Entities.Database;
@using ASOFT.ERP.A00.Entities.Common;
@using System.Web.UI.WebControls;
@using Kendo.Mvc;
@model IEnumerable<ASOFTSysFieldsViewModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    string Header = ViewBag.Header;
    string ScreenPopup = ViewBag.ScreenPopup;
    string key = ViewBag.Key;
    string pk = ViewBag.PKParent;
    string ScreenID = ViewBag.ScreenID;
    List<string> listjava = new List<string>();
    listjava = ViewBag.Java;
    List<string> listcss = new List<string>();
    listcss = ViewBag.CSS;
    string module = ViewBag.Module;
    int ver = ViewBag.Version;

    ViewBag.Title = Html.ASOFTPageTitle(Header, ScreenID).ToHtmlString();
    
    string urledit = "/PopupLayout/Index/" + ViewBag.Module + "/" + ScreenPopup + "?Pk=" + pk + "&Table=" + Model.ElementAt(0).sysTable + "&key=" + key;
}

@Html.ASOFTHidden("EnvironmentDivisionID", ASOFTEnvironment.DivisionID)
@Html.ASOFTHidden("urlParentContent", Request.Url.PathAndQuery)
@Html.ASOFTHidden("sysTable", Model.ElementAt(0).sysTable)
@Html.ASOFTHidden("PK", pk)
@Html.ASOFTHidden("Key", key)
@Html.ASOFTHidden("urlEdit", urledit)
@Html.ASOFTHidden("Module", (string)ViewBag.Module)
@Html.ASOFTHidden("sysScreenID", ScreenID)

@*@section jsFeature
{
        <script src="@Url.Content("")"></script>
}
@section styleFeature{
    <link href="@Url.Content("~/")" rel="stylesheet" type="text/css" />
}*@

<div id="contentMaster">

@Html.ASOFTHeader(new HeaderModel { Title = Html.ASOFTPageTitle((string)ViewBag.ScreenName, (string)ViewBag.ScreenID).ToHtmlString(), Breakcrumb = true })
    <div id="ViewMaster" class="asf-panel-view-master" >
        <div class="asf-panel-master-header">                        
            <div class="asfbtn asfbtn-right">         
                      
                        @if (Model.ElementAt(0).Toolbar1 != null)
                        {
                            Model.ElementAt(0).Toolbar1.EventEdit = "BtnEdit_Click";
                            Model.ElementAt(0).Toolbar1.EventDelete = "BtnDelete_Click";               
                        }
                        @Html.Partial("~/Views/Shared/EditorTemplates/Toolbar.cshtml", Model.ElementAt(0).Toolbar1)                                    
                 </div>
             </div>
           <div id="viewPartial">
            @Html.Partial(ver == 2 ? "ViewMasterV2" : "ViewMaster", Model)
        </div>
    </div>
</div>

@Html.ASOFTHidden("ParentID", (string)ViewBag.ParentID)

@section jsFeature {
    @if (listjava.Count > 0)
    {
        foreach (string jv in listjava)
        {
            <script src="@Url.Content("~/Scripts/JavaCustomize/" + module + "/" + jv+"?v="+ASOFTEnvironment.Version)" type="text/javascript"></script>
        }
    }
}

@section styleFeature {
    @if (listcss.Count > 0)
    {
        foreach(string css in listcss)
        {
            <link  href="@Url.Content("~/Content/CSSCustomize/"+ module + "/" + css +"?v="+ASOFTEnvironment.Version)" rel="stylesheet" type="text/css" />
        }
    }
}

<script src="@Url.Content("~/Scripts/viewnodetail.js")" type="text/javascript"></script>

<link id="RWDNoDetail400" href="@Url.Content("~/Content/Styles/RWD/ViewNoDetail/asoftRWD480pxViewNo.css" +"?v="+ASOFTEnvironment.Version)" rel="stylesheet" type="text/css" />
<link id="RWDNoDetail600" href="@Url.Content("~/Content/Styles/RWD/ViewNoDetail/asoftRWD600pxViewNo.css" +"?v="+ASOFTEnvironment.Version)" rel="stylesheet" type="text/css" />