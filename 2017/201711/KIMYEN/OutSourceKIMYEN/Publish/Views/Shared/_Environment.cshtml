@using ASOFT.ERP.A00.Core
@*
//####################################################################
//# Copyright (C) 2010-2011, ASoft JSC.  All Rights Reserved. 
//#
//# History:
//#     Date Time       Updater         Comment
//#     09/05/2014      Minh Lâm      Tạo mới
//####################################################################
*@

@if (ASOFTEnvironment.NumberFormat != null)
{
    <script type="text/javascript">
        var BASE_URL = "@Url.Content("~/")"
            , CURREN_CONTROLLER = '@Html.ASOFTGetController()'
            , CURRENT_AREA = '@Html.ASOFTGetArea()'

            , ASOFTEnvironment = {
                Language:'@ASOFTEnvironment.Language',
                DivisionID: '@ASOFTEnvironment.DivisionID',
                UserID: '@ASOFTEnvironment.UserID',
                ShopID: '@ASOFTEnvironment.ShopID',
                CurrencyID: '@ASOFTEnvironment.CurrencyID',
                UserName: '@Html.Raw(ASOFTEnvironment.UserName)',
                BeginDate: '@ASOFTEnvironment.BeginDate',
                EndDate: '@ASOFTEnvironment.EndDate',
                CurBeginDate: '@ASOFTEnvironment.CurBeginDate',
                CurEndDate: '@ASOFTEnvironment.CurEndDate',
                Period: '@ASOFTEnvironment.Period',
                TranMonth: '@ASOFTEnvironment.TranMonth',
                TranYear: '@ASOFTEnvironment.TranYear',
                BaseCurrencyID: '@ASOFTEnvironment.BaseCurrencyID',
            KendoCulture: '@System.Globalization.CultureInfo.CurrentCulture.ToString()',
                ConvertDecimalFormat: '@ASOFTEnvironment.ConvertDecimalJsFormat',
                UnitPriceDecimalFormat: '@ASOFTEnvironment.UnitPriceDecimalJsFormat',
                QuantityDecimalFormat: '@ASOFTEnvironment.QuantityDecimalJsFormat',
                PercentDecimalFormat: '@ASOFTEnvironment.PercentDecimalJsFormat',
                OriginalDecimalFormat: '@ASOFTEnvironment.OriginalDecimalJsFormat',
                AbsentDecimalFormat: '@ASOFTEnvironment.AbsentDecimalJsFormat',
                HolidayDecimalFormat: '@ASOFTEnvironment.HolidayDecimalJsFormat',
                ExchangeRateDecimalFormat: '@ASOFTEnvironment.ExchangeRateDecimalJsFormat',

                NumberFormat: {

                    NumberDecimalSeparator: '@System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator',
                    NumberGroupSeparator: '@System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberGroupSeparator',

                    GeneralDecimals: '@ASOFTEnvironment.NumberFormat.GeneralDecimals',
                    ConvertedDecimals:'@ASOFTEnvironment.NumberFormat.ConvertedDecimals',
                    PercentDecimals: '@ASOFTEnvironment.NumberFormat.PercentDecimals',
                    QuantityDecimals:'@ASOFTEnvironment.NumberFormat.QuantityDecimals',
                    UnitCostDecimals: '@ASOFTEnvironment.NumberFormat.UnitCostDecimals',
                    OriginalDecimals: '@ASOFTEnvironment.NumberFormat.OriginalDecimals',
                    AbsentDecimals: '@ASOFTEnvironment.NumberFormat.AbsentDecimals',
                    HolidayDecimals: '@ASOFTEnvironment.NumberFormat.HolidayDecimals',
                    ExchangeRateDecimals: '@ASOFTEnvironment.NumberFormat.ExchangeRateDecimals',

                    KendoGeneralDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.GeneralDecimalFormatString',
                    KendoConvertedDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.ConvertedDecimalsFormatString',
                    KendoPercentDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.PercentDecimalsFormatString',
                    KendoUnitCostDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.UnitCostDecimalsFormatString',
                    KendoQuantityDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.QuantityDecimalsFormatString',
                    KendoOriginalDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.OriginalDecimalsFormatString',
                    KendoAbsentDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.AbsentDecimalsFormatString',
                    KendoHolidayDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.HolidayDecimalsFormatString',
                    KendoExchangeRateDecimalsFormatString: '@ASOFTEnvironment.NumberFormat.ExchangeRateDecimalsFormatString',
                },

                CustomerIndex: {
                    MEIKO: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_MEIKO)',
                    PhucLong: '@(ASOFTEnvironment.BusinessArea == ASOFTConstants.BUSSINESSAREA_CAFE)',
                    HoangTran: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_HOANGTRAN)',
                    TTTMQ3: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_TTTMQ3)',
                    KingCom: '@(ASOFTEnvironment.BusinessArea != ASOFTConstants.BUSSINESSAREA_CAFE)',
                    OKIA: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_OKIA)',
                    MinhTri: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_MINHTRI)',
                    XUONGRONG: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_XUONGRONG)'
                },

                CurrentModule: {
                    HRM: '@(ASOFTEnvironment.ModuleID == ASOFTConstants.MODULE_HRM)'
                }
            };

        for (var prop in ASOFTEnvironment.CustomerIndex) {
            if (ASOFTEnvironment.CustomerIndex.hasOwnProperty(prop)) {
                ASOFTEnvironment.CustomerIndex['is' + prop] = function (_prop) {
                    return function () {
                        return ASOFTEnvironment.CustomerIndex[_prop] === 'True';
                    }

                }(prop);
            }
        }

        for (var prop in ASOFTEnvironment.NumberFormat) {
            if (ASOFTEnvironment.NumberFormat.hasOwnProperty(prop)) {
                if (prop.endsWith('Decimals')) {
                    ASOFTEnvironment.NumberFormat['round' + prop] = function (_prop) {
                        return function (num) {
                            var special = parseInt('1' + new Array(ASOFTEnvironment.NumberFormat[_prop] + 1).join('0'))
                            return Math.round(num * special) / special;
                        }

                    }(prop);
                }
            }
        }
    </script>
}
else
{
    <script type="text/javascript">
        var BASE_URL = "@Url.Content("~/")"

            , CURREN_CONTROLLER = '@Html.ASOFTGetController()'

        , CURRENT_AREA = '@Html.ASOFTGetArea()'

        , ASOFTEnvironment = {
            Language: '@ASOFTEnvironment.Language',
            KendoCulture: '@System.Globalization.CultureInfo.CurrentCulture.ToString()',
            ConvertDecimalFormat: '@ASOFTEnvironment.ConvertDecimalJsFormat',
            UnitPriceDecimalFormat: '@ASOFTEnvironment.UnitPriceDecimalJsFormat',
            QuantityDecimalFormat: '@ASOFTEnvironment.QuantityDecimalJsFormat',
            PercentDecimalFormat: '@ASOFTEnvironment.PercentDecimalJsFormat',
            OriginalDecimalFormat: '@ASOFTEnvironment.OriginalDecimalJsFormat',

            NumberFormat: {
                NumberDecimalSeparator: '@System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator',
                NumberGroupSeparator: '@System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberGroupSeparator',

                NumberMoneyDecimalDigits: 3,
                NumberPercentDigits: 3,
                NumberDecimalDigits: 3,

                GeneralDecimals: 8,
                MoneyDecimalDigits: 0,
                PercentDecimalDigits: 2,
                QuantityDigits: 0,
                RatioDigits: 0,
            },

            CustomerIndex: {
                MEIKO: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_MEIKO)',
                PhucLong: '@(ASOFTEnvironment.BusinessArea == ASOFTConstants.BUSSINESSAREA_CAFE)',
                HoangTran: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_HOANGTRAN)',
                TTTMQ3: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_TTTMQ3)',
                KingCom: '@(ASOFTEnvironment.BusinessArea != ASOFTConstants.BUSSINESSAREA_CAFE)',
                MinhTri: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_MINHTRI)',
                XUONGRONG: '@(ASOFTEnvironment.CustomerIndex == ASOFTConstants.CUSTOMERINDEX_XUONGRONG)'
            },

            CurrentModule: {
            HRM: '@(ASOFTEnvironment.ModuleID == ASOFTConstants.MODULE_HRM)'
            }
        };

        for (var prop in ASOFTEnvironment.CustomerIndex) {
            if (ASOFTEnvironment.CustomerIndex.hasOwnProperty(prop)) {
                ASOFTEnvironment.CustomerIndex['is' + prop] = function (_prop) {
                    return function () {
                        return ASOFTEnvironment.CustomerIndex[_prop] === 'True';
                    }

                }(prop);
            }
        }

        for (var prop in ASOFTEnvironment.NumberFormat) {
            if (ASOFTEnvironment.NumberFormat.hasOwnProperty(prop)) {
                //if (prop.endsWith('Decimals')) {
                //    ASOFTEnvironment.NumberFormat['round' + prop] = function (_prop) {
                //        return function (num) {
                //            var special = parseInt('1' + new Array(ASOFTEnvironment.NumberFormat[_prop] + 1).join('0'))
                //            return Math.round(num * special) / special;
                //        }

                //    }(prop);
                //}
            }
        }
    </script>

}
